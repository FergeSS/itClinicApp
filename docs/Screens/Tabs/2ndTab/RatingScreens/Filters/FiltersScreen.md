# Экран «Фильтры»

## Когда показывается
Экран открывается при настройке фильтров для **рейтинга/списков** (по нажатию кнопки фильтров на экране рейтинга).

## Назначение
- Выбрать, **по каким метрикам** будет формироваться общая оценка/рейтинг.
- Настроить дополнительные параметры, которые зависят от выбранных метрик (периоды, пороги, день недели и т. п.).
- Ограничить данные **по диапазону дат**.
- Быстро применить настройки или сохранить их как **шаблон**.

> Примечание: **управление весом метрик** (веса/коэффициенты) в текущей версии **не поддерживается** и будет добавлено **в следующей версии**.

## Основные сценарии
1. Пользователь выбирает шаблон → настройки фильтров подставляются автоматически.
2. Пользователь отмечает метрики чекбоксами и при необходимости задаёт параметры для каждой метрики.
3. Пользователь задаёт диапазон дат (или очищает его).
4. Пользователь нажимает **«Применить»** или сохраняет текущий набор как **шаблон**.

## Структура экрана

### 1) Шапка
- Кнопка **Назад** (стрелка) — возвращает на предыдущий экран без применения изменений.
- Заголовок: **«Фильтры»**.

### 2) Шаблоны
Горизонтальный список чипсов-шаблонов (пример: **«Нет»**, **«Коммиты»**, **«Пулл Реквесты»**, …).

- Выбор шаблона подставляет сохранённый набор настроек (метрики + параметры).
- Шаблон **«Нет»** означает отсутствие предустановки (ручная настройка).

### 3) Метрики
Блок **«Метрики»** с пояснением: пользователь выбирает метрики, из которых будет формироваться общая оценка.

Содержимое блока:
- Кнопка **«Очистить»** — снимает выбор со всех метрик (и сбрасывает их параметры к значениям по умолчанию).
- Список метрик в виде строк с чекбоксами.
- У всех метрик есть иконка **(i)** — открывает подсказку/описание метрики.

Примерный список метрик:
- Commits
- Issues
- Pull Requests
- Оценка производительности
- Общее количество коммитов
- Завершённость задач
- Время жизни Pull Request
- Быстрые Pull Requests
- Изменчивость кода
- Владение кодом
- Доминирующий день недели

### 4) Параметры метрик
Для части метрик доступны дополнительные параметры. Они отображаются **под названием метрики** (или рядом со строкой метрики) и меняются напрямую на этом экране.

Типовые параметры (как в макете):
- **Период** (например: чип **«2 недели»**) — может отображаться у метрик вроде Commits / Issues / Pull Requests / Оценка производительности.
- **Порог/время** (например: чип **«2,5 часа»**) — для метрик, где нужен порог (например, «Быстрые Pull Requests»).
- **День недели** (например: выбор **«Четверг»**) — для метрик, связанных с доминирующим днём недели.

Если метрика снята (чекбокс выключен), её параметры считаются неактивными.

### 5) Диапазон дат
Блок **«Диапазон дат»**:
- Поле выбора периода (интервал дат) с иконкой календаря.
- Кнопка **«Очистить»** — сбрасывает выбранный период.

### 6) Действия
Внизу экрана две кнопки:
- **«Применить»** — применяет выбранные фильтры и возвращает на предыдущий экран.
- **«Сохранить шаблон»** — сохраняет текущие настройки как новый шаблон (метрики + параметры + диапазон дат).

## Поведение и заметки
- При выборе шаблона значения на экране обновляются сразу.
- В текущей версии **нет настройки весов метрик** — итог считается по выбранным метрикам без ручных коэффициентов.